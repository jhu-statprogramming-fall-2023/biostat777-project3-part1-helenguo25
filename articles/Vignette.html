<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="sentimentr">
<title>Vignette • sentimentr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Vignette">
<meta property="og:description" content="sentimentr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">sentimentr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.9.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Vignette.html">Vignette</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/trinker/sentimentr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Vignette</h1>
                        <h4 data-toc-skip class="author">Helen Guo
(vignette author); Tyler Rinker (package author)</h4>
            
            <h4 data-toc-skip class="date">2023-12-12</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/trinker/sentimentr/blob/HEAD/vignettes/Vignette.Rmd" class="external-link"><code>vignettes/Vignette.Rmd</code></a></small>
      <div class="d-none name"><code>Vignette.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h2>
<p>Setup:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Clear workspace</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span>list<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/ls.html" class="external-link">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://here.r-lib.org/" class="external-link">here</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/trinker/sentimentr" class="external-link">sentimentr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="questions">Questions<a class="anchor" aria-label="anchor" href="#questions"></a>
</h3>
<p>Via sentiment analysis by sentence, how does the mood/emotion of
dialogue in the television show Stranger Things change throughout the
seasons? Is it generally positive or negative? What if we also take into
account the sentiments conveyed by parenthetical details in the raw
text?</p>
<p>In both scenarios, make sure to take into account how valence
shifters (“not”, “barely”, “but”, etc.) affect sentence meaning using
the sentimentr package.</p>
</div>
<div class="section level3">
<h3 id="data-sources">Data source(s)<a class="anchor" aria-label="anchor" href="#data-sources"></a>
</h3>
<p>We use the TidyTuesday GitHub repo on dialogue in Stranger Things
from 8flix.com: <a href="https://github.com/rfordatascience/tidytuesday/tree/master/data/2022/2022-10-18" class="external-link uri">https://github.com/rfordatascience/tidytuesday/tree/master/data/2022/2022-10-18</a></p>
<p>We download the stranger_things_all_dialogue data set, which contain
information on season, episode, and dialogue per line spoken in the
show.</p>
</div>
<div class="section level3">
<h3 id="data-dictionary">Data dictionary<a class="anchor" aria-label="anchor" href="#data-dictionary"></a>
</h3>
<p>The data dictionary for the measles data set can be found here: <a href="https://github.com/rfordatascience/tidytuesday/tree/master/data/2022/2022-10-18#data-dictionary" class="external-link uri">https://github.com/rfordatascience/tidytuesday/tree/master/data/2022/2022-10-18#data-dictionary</a></p>
</div>
<div class="section level3">
<h3 id="load-and-clean-data">Load and clean data<a class="anchor" aria-label="anchor" href="#load-and-clean-data"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Read in data - Uncomment all code below when knitting or running code for the first time</span></span>
<span><span class="co"># tuesdata &lt;- tidytuesdayR::tt_load('2022-10-18')</span></span>
<span><span class="co"># dialogue &lt;- tuesdata$stranger_things_all_dialogue</span></span>
<span><span class="co">#  </span></span>
<span><span class="co"># Tests if a directory named "data" exists locally using 'here'. </span></span>
<span><span class="co"># If not, create "data" directory</span></span>
<span><span class="co"># if (!dir.exists(here("data"))) {</span></span>
<span><span class="co">#     dir.create(here("data"))}</span></span>
<span><span class="co">#  </span></span>
<span><span class="co"># Saves data only once</span></span>
<span><span class="co"># if (!file.exists(here("data", "dialogue.RDS"))) {</span></span>
<span><span class="co">#     saveRDS(dialogue, file = here("data", "dialogue.RDS"))}</span></span>
<span></span>
<span><span class="co"># Read in the .RDS dataset locally from our computing environment</span></span>
<span><span class="va">dialogue</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"dialogue.RDS"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Clean data</span></span>
<span><span class="va">dialogue_clean</span><span class="op">&lt;-</span> <span class="va">dialogue</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>dialogue_text<span class="op">=</span><span class="va">dialogue</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="co"># Rename dialogue to dialogue_text to avoid confusion</span></span>
<span>   <span class="co"># Keep only relevant columns </span></span>
<span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">season</span>, <span class="va">episode</span>, <span class="va">line</span>, <span class="va">raw_text</span>, <span class="va">dialogue_text</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="co"># Remove NA and blank dialogue lines</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">dialogue_text</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">dialogue_text</span> <span class="op">!=</span> <span class="st">" "</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># View clean_data</span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">dialogue_clean</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Rows: 26,041</span></span>
<span><span class="co">## Columns: 5</span></span>
<span><span class="co">## $ season        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…</span></span>
<span><span class="co">## $ episode       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…</span></span>
<span><span class="co">## $ line          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 9, 10, 11, 12, 13, 14, 15, 16, 18, 19, 20, 21, 22, 23, 2…</span></span>
<span><span class="co">## $ raw_text      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "[Mike] Something is coming. Something hungry for blood.…</span></span>
<span><span class="co">## $ dialogue_text <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Something is coming. Something hungry for blood.", "A s…</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="sentiment-analysis-with-valence-shifters">Sentiment analysis with valence shifters<a class="anchor" aria-label="anchor" href="#sentiment-analysis-with-valence-shifters"></a>
</h3>
<p>We first split lines of TV show script into individual sentences
using get_sentences function from the sentimentr package, and then apply
the function to the dialogue-only text and the raw text (which includes
parenthetical details in the show script).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Two different sets of analysis: one dialogue-only text and one for raw text </span></span>
<span><span class="va">text_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">dialogue_clean</span><span class="op">$</span><span class="va">dialogue_text</span>,<span class="va">dialogue_clean</span><span class="op">$</span><span class="va">raw_text</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Function to split lines of TV show script into individual sentences</span></span>
<span><span class="va">split_sentences</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">text</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">output</span> <span class="op">&lt;-</span> <span class="va">dialogue_clean</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>sentences <span class="op">=</span> <span class="fu">sentimentr</span><span class="fu">::</span><span class="fu"><a href="../reference/get_sentences.html">get_sentences</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">output</span><span class="op">)</span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Call split_sentences for each set of analysis</span></span>
<span><span class="va">dialogue_split</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">text_list</span>, <span class="va">split_sentences</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Store both sets of text with sentences split</span></span>
<span><span class="va">input_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/pluck.html" class="external-link">pluck</a></span><span class="op">(</span><span class="va">dialogue_split</span>,<span class="fl">1</span><span class="op">)</span>, <span class="fu"><a href="https://purrr.tidyverse.org/reference/pluck.html" class="external-link">pluck</a></span><span class="op">(</span><span class="va">dialogue_split</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Next we will conduct emotion count analysis and sentiment score
analysis on the sentence-level for both sets of text using the
emotion_by and sentiment functions from the sentimentr package:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Function to count emotions conveyed on sentence level</span></span>
<span><span class="va">emotion_analysis</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span></span>
<span>    <span class="va">input</span>, </span>
<span>    <span class="fu"><a href="../reference/emotion_by.html">emotion_by</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="../reference/get_sentences.html">get_sentences</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">sentences</span><span class="op">)</span>, </span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">season</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">result_clean</span> <span class="op">&lt;-</span> <span class="va">result</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">season</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">emotion_count</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">season</span>,<span class="va">emotion_type</span>, <span class="va">emotion_count</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span> <span class="op">(</span><span class="va">result_clean</span><span class="op">)</span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Call emotions_analysis for each set of analysis</span></span>
<span><span class="va">emotion_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map_dfr.html" class="external-link">map_df</a></span><span class="op">(</span><span class="va">input_list</span>, <span class="va">emotion_analysis</span>, .id<span class="op">=</span><span class="st">"text_source"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Function to get sentiment score on sentence level</span></span>
<span><span class="va">sentiment_analysis</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">unnested_input</span> <span class="op">&lt;-</span> <span class="va">input</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="va">sentences</span><span class="op">)</span></span>
<span>      <span class="va">score</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sentiment.html">sentiment</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">sentences</span><span class="op">)</span></span>
<span>        <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_cols.html" class="external-link">bind_cols</a></span><span class="op">(</span><span class="va">unnested_input</span>, <span class="va">score</span><span class="op">)</span></span>
<span>          <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Call sentiment_analysis for each set of analysis</span></span>
<span><span class="va">sentiment_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">input_list</span>,<span class="va">sentiment_analysis</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Store both sets of results from sentiment analysis</span></span>
<span><span class="va">input_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/pluck.html" class="external-link">pluck</a></span><span class="op">(</span><span class="va">sentiment_results</span>,<span class="fl">1</span><span class="op">)</span>,<span class="fu"><a href="https://purrr.tidyverse.org/reference/pluck.html" class="external-link">pluck</a></span><span class="op">(</span><span class="va">sentiment_results</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Function to summarize mean and sd of sentiment scores</span></span>
<span><span class="va">get_means</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">result</span> <span class="op">&lt;-</span> <span class="va">input</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">season</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    mean_score <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">sentiment</span><span class="op">)</span>,</span>
<span>    sd_score <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">sentiment</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Call get_means for each set of analysis</span></span>
<span><span class="va">mean_sentiment_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map_dfr.html" class="external-link">map_df</a></span><span class="op">(</span><span class="va">input_list</span>, <span class="va">get_means</span>, .id <span class="op">=</span> <span class="st">"text_source"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="data-visualization">Data visualization<a class="anchor" aria-label="anchor" href="#data-visualization"></a>
</h3>
<p>For each set of analysis (dialogue-only text and raw text [which
includes parenthetical details]), we will first create a bar plot to
display the breakdown of emotion counts by emotion type and season of
Stranger things:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make faceted bar plot</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">emotion_results</span>, </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html" class="external-link">reorder</a></span><span class="op">(</span><span class="va">emotion_type</span>, <span class="op">-</span><span class="va">emotion_count</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">emotion_count</span>, fill <span class="op">=</span> <span class="va">season</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Emotion"</span>,</span>
<span>y <span class="op">=</span> <span class="st">"Emotion count"</span>,</span>
<span>title <span class="op">=</span> <span class="st">"Emotion count by emotion type and season of Stranger Things"</span>,</span>
<span>caption<span class="op">=</span></span>
<span>  <span class="st">"Data source: TidyTuesday GitHub repository Stranger Things dialogue dataset (2022-10-18)"</span>,</span>
<span>subtitle<span class="op">=</span> <span class="st">"Trust, anticipation, and fear are the top 3 emotions expressed across seasons"</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">90</span>, vjust <span class="op">=</span> <span class="fl">0.5</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="va">.</span> <span class="op">~</span> <span class="va">text_source</span>, </span>
<span>  labeller <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labeller.html" class="external-link">labeller</a></span><span class="op">(</span>text_source<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span> <span class="op">=</span> <span class="st">"Dialogue-only text"</span>, <span class="st">"2"</span> <span class="op">=</span> <span class="st">"Raw text"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>  </span></code></pre></div>
<p><img src="Vignette_files/figure-html/unnamed-chunk-4-1.png" width="816"></p>
<p>Next we will make a line plot to show how mean sentiment score
changes across seasons:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make faceted line plot</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mean_sentiment_results</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">season</span>, y <span class="op">=</span> <span class="va">mean_score</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Season of Stranger Things"</span>,</span>
<span>y <span class="op">=</span> <span class="st">"Mean sentiment score"</span>,</span>
<span>title <span class="op">=</span> <span class="st">"Mean sentiment score by season of Stranger Things"</span>,</span>
<span>caption<span class="op">=</span></span>
<span>  <span class="st">"Data source: TidyTuesday GitHub repository Stranger Things dialogue dataset (2022-10-18)"</span>,</span>
<span>subtitle<span class="op">=</span><span class="st">"Mean sentiment score decreased across seasons"</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="va">.</span> <span class="op">~</span> <span class="va">text_source</span>, </span>
<span>  labeller <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labeller.html" class="external-link">labeller</a></span><span class="op">(</span>text_source<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span> <span class="op">=</span> <span class="st">"Dialogue-only text"</span>, <span class="st">"2"</span> <span class="op">=</span> <span class="st">"Raw text"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>  </span></code></pre></div>
<p><img src="Vignette_files/figure-html/unnamed-chunk-5-1.png" width="816"></p>
<p>Finally let’s explore how our interpretation of the line plot changes
when standard error bars are shown:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make faceted line plot with SD bars</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mean_sentiment_results</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">season</span>, y <span class="op">=</span> <span class="va">mean_score</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" class="external-link">geom_errorbar</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="va">mean_score</span> <span class="op">-</span> <span class="va">sd_score</span>, ymax <span class="op">=</span> <span class="va">mean_score</span> <span class="op">+</span> <span class="va">sd_score</span><span class="op">)</span>, width<span class="op">=</span><span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span> </span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Season of Stranger Things"</span>,</span>
<span>y <span class="op">=</span> <span class="st">"Mean sentiment score (SD)"</span>,</span>
<span>title <span class="op">=</span> <span class="st">"Mean sentiment score by season of Stranger Things"</span>,</span>
<span>caption<span class="op">=</span></span>
<span>  <span class="st">"Data source: TidyTuesday GitHub repository Stranger Things dialogue dataset (2022-10-18)"</span>,</span>
<span>subtitle<span class="op">=</span><span class="st">"Decrease in mean sentiment score across seasons is not significant"</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="va">.</span> <span class="op">~</span> <span class="va">text_source</span>, </span>
<span>  labeller <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labeller.html" class="external-link">labeller</a></span><span class="op">(</span>text_source<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span> <span class="op">=</span> <span class="st">"Dialogue-only text"</span>, <span class="st">"2"</span> <span class="op">=</span> <span class="st">"Raw text"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>  </span></code></pre></div>
<p><img src="Vignette_files/figure-html/unnamed-chunk-6-1.png" width="816"></p>
</div>
<div class="section level3">
<h3 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h3>
<p>From both the dialogue-only text and raw text analyses, we can see
that the seasons of Stranger Things have a higher emotion count as the
show progresses, but the primary emotions and proportions of emotions
conveyed remains similar across seasons. Although mean sentiment score
decreases slightly across seasons in both sets of analyses, this
decrease is not significant.</p>
</div>
<div class="section level3">
<h3 id="functions-used">Functions used<a class="anchor" aria-label="anchor" href="#functions-used"></a>
</h3>
<p>dplyr functions - rename, select, filter, glimpse, bind_cols,
group_by, summarise, arrange</p>
<p>tidyr functions - unnest</p>
<p>geom functions - geom_bar, geom_line, geom_errorbar</p>
<p>purrr functions - map, map_df, pluck</p>
<p>sentimentr functions - get_sentences, sentiment, emotion_by</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Developed by Tyler Rinker. Vignette created by Helen Guo.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
