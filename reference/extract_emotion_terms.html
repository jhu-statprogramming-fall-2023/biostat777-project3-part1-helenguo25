<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Extract the emotion words from a text."><title>Extract Emotion Words — extract_emotion_terms • sentimentr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extract Emotion Words — extract_emotion_terms"><meta property="og:description" content="Extract the emotion words from a text."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">sentimentr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.9.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Vignette.html">Vignette</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/trinker/sentimentr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Extract Emotion Words</h1>
      <small class="dont-index">Source: <a href="https://github.com/trinker/sentimentr/blob/HEAD/R/extract_emotion_terms.R" class="external-link"><code>R/extract_emotion_terms.R</code></a></small>
      <div class="d-none name"><code>extract_emotion_terms.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Extract the emotion words from a text.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">extract_emotion_terms</span><span class="op">(</span></span>
<span>  <span class="va">text.var</span>,</span>
<span>  emotion_dt <span class="op">=</span> <span class="fu">lexicon</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/lexicon/man/hash_nrc_emotions.html" class="external-link">hash_nrc_emotions</a></span>,</span>
<span>  un.as.negation <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  retention_regex <span class="op">=</span> <span class="st">"[^[:alpha:];:,']"</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>text.var</dt>
<dd><p>The text variable.  Can be a <code>get_sentences</code> object or
a raw character vector though <code>get_sentences</code> is preferred as it avoids
the repeated cost of doing sentence boundary disambiguation every time
<code>emotion</code> is run.</p></dd>


<dt>emotion_dt</dt>
<dd><p>A <span class="pkg">data.table</span> with a <code>token</code> and <code>emotion</code>
column (<code>tokens</code> are nested within the <code>emotion</code>s.  The table
cannot contain any duplicate rows and must have the <code>token</code> column set
as the key column (see <code><a href="https://rdatatable.gitlab.io/data.table/reference/setkey.html" class="external-link">?data.table::setkey</a></code>).  The default emotion
table is <code><a href="https://rdrr.io/pkg/lexicon/man/hash_nrc_emotions.html" class="external-link">lexicon::hash_nrc_emotions</a></code>.</p></dd>


<dt>un.as.negation</dt>
<dd><p>logical.  If <code>TRUE</code> then emotion words prefixed
with an 'un-' are treated as a negation.  For example,<code>"unhappy"</code> would 
be treated as <code>"not happy"</code>.  If an emotion word has an un- version in the
<code>emotion_dt</code> then no substitution is performed and an optional warning
will be given.</p></dd>


<dt>retention_regex</dt>
<dd><p>A regex of what characters to keep.  All other 
characters will be removed.  Note that when this is used all text is lower 
case format.  Only adjust this parameter if you really understand how it is 
used.  Note that swapping the <code>\\{p}</code> for <code>[^[:alpha:];:,\']</code> may 
retain more alpha letters but will likely decrease speed.</p></dd>


<dt>...</dt>
<dd><p>Ignored.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>Returns a <span class="pkg">data.table</span> with a columns of emotion terms.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">mytext</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"I am not afraid of you"</span>,</span></span>
<span class="r-in"><span>    <span class="cn">NA</span>,</span></span>
<span class="r-in"><span>    <span class="st">""</span>,</span></span>
<span class="r-in"><span>    <span class="st">"I love it [not really]"</span>, </span></span>
<span class="r-in"><span>    <span class="st">"I'm not angry with you"</span>, </span></span>
<span class="r-in"><span>    <span class="st">"I hate it when you lie to me.  It's so humiliating"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"I'm not happpy anymore.  It's time to end it"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"She's a darn good friend to me"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"I went to the terrible store"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"There is hate and love in each of us"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"I'm no longer angry!  I'm really experiencing peace but not true joy."</span>,</span></span>
<span class="r-in"><span>    </span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Out of the night that covers me, Black as the Pit from pole to"</span>, </span></span>
<span class="r-in"><span>      <span class="st">"pole, I thank whatever gods may be For my unconquerable soul."</span>,</span></span>
<span class="r-in"><span>      <span class="st">"In the fell clutch of circumstance I have not winced nor cried"</span>,</span></span>
<span class="r-in"><span>      <span class="st">"aloud. Under the bludgeonings of chance My head is bloody, but unbowed."</span>,</span></span>
<span class="r-in"><span>      <span class="st">"Beyond this place of wrath and tears Looms but the Horror of the"</span>, </span></span>
<span class="r-in"><span>      <span class="st">"shade, And yet the menace of the years Finds, and shall find, me unafraid."</span>,</span></span>
<span class="r-in"><span>      <span class="st">"It matters not how strait the gate, How charged with punishments"</span>, </span></span>
<span class="r-in"><span>      <span class="st">"the scroll, I am the master of my fate: I am the captain of my soul."</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>    </span></span>
<span class="r-in"><span>    </span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">mytext2</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_sentences.html">get_sentences</a></span><span class="op">(</span><span class="va">mytext</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="emotion.html">emotion</a></span><span class="op">(</span><span class="va">mytext2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">emo_words</span> <span class="op">&lt;-</span> <span class="fu">extract_emotion_terms</span><span class="op">(</span><span class="va">mytext2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">emo_words</span></span></span>
<span class="r-in"><span><span class="va">emo_words</span><span class="op">$</span><span class="va">sentence</span></span></span>
<span class="r-in"><span><span class="va">emo_words</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'anger'</span>, <span class="st">'anticipation'</span>, <span class="st">'disgust'</span>, <span class="st">'fear'</span>, <span class="st">'joy'</span>, <span class="st">'sadness'</span>, <span class="st">'surprise'</span>, <span class="st">'trust'</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">emo_words</span><span class="op">)</span><span class="op">$</span><span class="va">counts</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">emo_words</span><span class="op">)</span><span class="op">$</span><span class="va">elements</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## directly ona  character string (not recommended: use `get_sentences` first)</span></span></span>
<span class="r-in"><span><span class="fu">extract_emotion_terms</span><span class="op">(</span><span class="va">mytext</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">brady</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_sentences.html">get_sentences</a></span><span class="op">(</span><span class="va">crowdflower_deflategate</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">brady_emo</span> <span class="op">&lt;-</span> <span class="fu">extract_emotion_terms</span><span class="op">(</span><span class="va">brady</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">brady_emo</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">brady_emo</span><span class="op">)</span><span class="op">$</span><span class="va">counts</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">brady_emo</span><span class="op">)</span><span class="op">$</span><span class="va">elements</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Developed by Tyler Rinker. Vignette created by Helen Guo.</p>
</div>

    </footer></div>

  

  

  </body></html>

